<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Top｜eFootball スタメン設計ツール</title>
  <link rel="stylesheet" th:href="@{/css/top.css}">
  <script th:src="@{/js/top.js}" defer></script>
</head>
<body>
<header>
  <div class="inner">
    <h1>eFootball スタメン設計ツール</h1>
  </div>
</header>

<div class="container">
  <!-- メインフォーム -->
  <section class="panel">
    <h2>Top画面：縛りを決める</h2>
    <form id="topForm" th:action="@{/constraints/next}" method="post" autocomplete="off">
      <!-- CSRF（有効時のみ展開） -->
      <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}"/>

      <!-- タイトル -->
      <label class="block" for="title">タイトル</label>
      <input id="title" name="title" type="text" placeholder="例：23-24 欧州リーグ縛り" required
             th:value="${title}"/>

      <!-- 縛りの種類 -->
      <label class="block">縛りの種類</label>
      <div class="radio-row" role="radiogroup" aria-label="縛りの種類">
        <label class="radio">
          <input type="radio" name="type" value="nationality" checked
                 th:checked="${type} == 'nationality'"> 国籍
        </label>
        <label class="radio">
          <input type="radio" name="type" value="team" th:checked="${type} == 'team'"> チーム
        </label>
        <label class="radio">
          <input type="radio" name="type" value="league" th:checked="${type} == 'league'"> リーグ
        </label>
      </div>
      <div class="muted">※ 最大 100 件まで</div>

      <!-- 入力欄（Enterで追加） -->
      <label class="block" for="itemInput">
        値を入力して <span class="kbd">Enter</span> で追加
      </label>
      <div class="row">
        <input id="itemInput" type="text"
               placeholder="日本 / バルセロナ / プレミアリーグ など">
        <button class="btn" type="button" id="addBtn" aria-label="追加">追加</button>
      </div>
      <div class="count"><span id="count">0</span> / 100</div>

      <!-- 追加された値（チップ + hidden inputs） -->
      <div id="chips" class="chips" aria-live="polite"></div>
      <div id="hiddenInputs"></div>

      <!-- アクション -->
      <div class="actions">
        <a class="btn" href="/constraints" th:href="@{/constraints}">保存 / 読み込み</a>
        <button class="btn btn-primary btn-lg" type="submit">決定（フォーメーションへ）</button>
      </div>
    </form>
  </section>

  <!-- ヘルプ -->
  <aside class="panel help">
    <h2>使い方メモ</h2>
    <ul>
      <li>種類（国籍 / チーム / リーグ）を選択。</li>
      <li>テキストに入力して <span class="kbd">Enter</span> または「追加」クリック。</li>
      <li>チップの「×」で削除。並びは入力順です。</li>
      <li>「保存 / 読み込み」で縛りセットを管理できます。</li>
    </ul>
  </aside>
</div>
</body>
</html>
